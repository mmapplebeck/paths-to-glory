(this["webpackJsonppaths-to-glory"]=this["webpackJsonppaths-to-glory"]||[]).push([[0],{100:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=(n(93),n(13)),l=n(35),s=n(36),u=n(146),m=n(152),d=n(77),h=n(153),f=n(51),p=n(63),g=n(64),v=n(49),b=n.n(v),E="https://10.110.101.254/nodes";var O=function(){function e(){Object(p.a)(this,e)}return Object(g.a)(e,null,[{key:"getPaths",value:function(e){return b.a.get("".concat(E,"/").concat(e,"/paths")).then((function(e){return JSON.parse(e.text)}))}},{key:"transformPaths",value:function(e){if(0===e.previous.nodes.length&&0===e.next.nodes.length)throw new Error("No paths found.");var t=e.node,n=new Set(e.previous.nodes.map((function(e){return e.name}))),a=e.previous.nodes.filter((function(e){return e.name!==t.name})).sort((function(e,t){return t.count-e.count})).map((function(e){return[e.name,t.name,e.count]})),r=e.next.nodes.filter((function(e){return e.name!==t.name})).sort((function(e,t){return t.count-e.count})).map((function(e){return[t.name,n.has(e.name)?(a=e.name,a+" "):e.name,e.count];var a}));return[].concat([["From","To","Count"]],Object(f.a)(a),Object(f.a)(r))}},{key:"getDataForNode",value:function(e){var t=this;return this.getPaths(function(e){return" "===e[e.length-1]?e.slice(0,e.length-1):e}(e)).then((function(e){return t.transformPaths(e)}))}},{key:"getResults",value:function(e){return b.a.get("".concat(E,"/list?limit=1000")).then((function(e){return JSON.parse(e.text).nodeIds}))}}]),e}(),j=(n(100),n(26)),y=n(65),w=n.n(y),N=n(66),k=n(143),x=n(19),S=Object(k.a)((function(){return{root:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},isHovering:{cursor:"pointer"}}}));var C=function(e){var t=e.data,n=e.nodeName,o=e.setNodeName,c=Object(x.a)(),l=Object(a.useState)(!1),s=Object(i.a)(l,2),m=s[0],d=s[1],h=S();return r.a.createElement("div",{className:w()(h.root,Object(j.a)({},h.isHovering,m))},r.a.createElement(N.a,{width:"100%",height:"100%",chartType:"Sankey",loader:r.a.createElement(u.a,{color:"primary",size:100}),data:t,options:{sankey:{node:{width:100,interactivity:!0,colors:c.palette.colors,nodePadding:16,label:{fontSize:16,bold:!0}},link:{colors:c.palette.colors,colorMode:"gradient",fillOpacity:.9}}},chartEvents:[{eventName:"select",callback:function(e){var t=e.chartWrapper.getChart().getSelection();if(1===t.length){var n=Object(i.a)(t,1)[0].name;o(n)}}},{eventName:"ready",callback:function(e){var t=e.chartWrapper,a=e.google,r=t.getChart();a.visualization.events.addListener(r,"onmouseover",(function(e){var t=e.name;t&&t!==n&&d(!0)})),a.visualization.events.addListener(r,"onmouseout",(function(){d(!1)}))}}]}))},B=n(150),I=n(151),P=n(149),T=n(72),W=n.n(T),z=n(157),F=n(68),M=n.n(F),R=n(50),D=n(154),L=n(155),J=n(4),H=n(9),q=n(71),A=n.n(q),U=Object(J.a)({root:{"& .MuiOutlinedInput-root":{color:"inherit",marginLeft:"1.5rem",backgroundColor:Object(H.c)("#fff",.15),"&:hover":{backgroundColor:Object(H.c)("#fff",.25)},"& fieldset":{border:0}}}})(D.a);var G=function(e){var t=e.setNodeName,n=r.a.useState(!1),a=Object(i.a)(n,2),o=a[0],c=a[1],l=r.a.useState([]),s=Object(i.a)(l,2),m=s[0],d=s[1],h=0===m.length;return r.a.useEffect((function(){var e=!0;if(h)return O.getResults().then((function(t){e&&d(t)})).catch((function(e){console.log(e)})),function(){e=!1}}),[h]),r.a.createElement(L.a,{id:"asynchronous-demo",style:{width:300},open:o,onOpen:function(){c(!0)},onClose:function(){c(!1)},options:m,loading:h,disableClearable:!0,blurOnSelect:!0,clearOnBlur:!0,freeSolo:!0,value:"",size:"small",onChange:function(e,n){t(n)},renderInput:function(e){return r.a.createElement(U,Object.assign({},e,{placeholder:"Find a node\u2026",variant:"outlined",InputProps:Object(R.a)(Object(R.a)({},e.InputProps),{},{endAdornment:r.a.createElement(r.a.Fragment,null,h?r.a.createElement(u.a,{color:"inherit",size:20}):r.a.createElement(A.a,null),e.InputProps.endAdornment)})}))}})},V=Object(k.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(j.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),helpImage:{maxWidth:"100%"},paper:{padding:e.spacing(2)},disclaimer:{marginTop:e.spacing(2)}}}));function Y(e){var t=e.setNodeName,n=r.a.useState(!1),a=Object(i.a)(n,2),o=a[0],c=a[1],l=V();return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{position:"fixed"},r.a.createElement(I.a,null,r.a.createElement(m.a,{className:l.title,variant:"h6",noWrap:!0},"OncoEMR User Paths"),r.a.createElement(G,{setNodeName:t}),r.a.createElement("div",{className:l.grow}),r.a.createElement(P.a,{"aria-label":"What is this?","aria-haspopup":"true",onClick:function(){return c(!0)},color:"inherit"},r.a.createElement(W.a,null)))),r.a.createElement(z.a,{open:o,onClose:function(){return c(!1)},"aria-labelledby":"What is this?","aria-describedby":"Learn how to use the app."},r.a.createElement("img",{src:M.a,alt:"Chart",className:l.helpImage}),r.a.createElement("div",{className:l.paper},r.a.createElement(m.a,{variant:"h6",gutterBottom:!0},"How to Use and Interpret"),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"This chart shows the flow of users through OncoEMR. Each node represents a page or a modal within OncoEMR. The lines represent users\u2019 movement from one page/modal to another. The thickness of the lines indicate how frequent that movement occurs; the thicker the line the more frequent the movement."),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"Clicking on a node will show you the flow of users from it."),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"You can use the search function to locate and display nodes of interest."),r.a.createElement("div",{className:l.disclaimer},r.a.createElement(m.a,{variant:"h6",gutterBottom:!0},"Disclaimer"),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"This application is a proof-of-concept. The data shown does not represent all users\u2019 activity in OncoEMR.")))))}var $=n(73),K=n.n($);function Q(){var e=Object(l.a)(["\n  max-width: 40%;\n  margin-bottom: 1rem;\n"]);return Q=function(){return e},e}function X(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: 50%;\n  text-align: center;\n"]);return X=function(){return e},e}function Z(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return Z=function(){return e},e}function _(){var e=Object(l.a)(["\n  padding: 1rem;\n  padding-top: calc(4rem + 1rem);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  position: relative;\n"]);return _=function(){return e},e}var ee=Object(d.a)({palette:{primary:{main:"#5051DB"},colors:["#5051DB","#05bfe0","#1463b0","#33d1bf","#0a7387","#33f5f5"]}}),te=s.a.main(_()),ne=s.a.div(Z()),ae=s.a.div(X()),re=s.a.img(Q());var oe=function(){var e=Object(a.useState)("Visit List"),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(null),l=Object(i.a)(c,2),s=l[0],d=l[1],f=Object(a.useState)(null),p=Object(i.a)(f,2),g=p[0],v=p[1],b=Object(a.useState)(!1),E=Object(i.a)(b,2),j=E[0],y=E[1];return Object(a.useEffect)((function(){y(!0),O.getDataForNode(n).then((function(e){d(e),v(null)})).catch((function(e){console.log(g),v(e.message)})).finally((function(){y(!1)}))}),[n]),r.a.createElement(h.a,{theme:ee},r.a.createElement(Y,{setNodeName:o}),r.a.createElement(te,null,s&&!g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{data:s,nodeName:n,setNodeName:o})),g&&r.a.createElement(ae,null,r.a.createElement(re,{src:K.a,alt:"error"}),r.a.createElement(m.a,{variant:"h6"},g)),j&&r.a.createElement(ne,null,r.a.createElement(u.a,{color:"primary",size:100}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,t,n){e.exports=n.p+"static/media/help.c506c2ac.png"},73:function(e,t,n){e.exports=n.p+"static/media/error.74a8c9ef.png"},88:function(e,t,n){e.exports=n(107)},93:function(e,t,n){}},[[88,1,2]]]);
//# sourceMappingURL=main.6e180717.chunk.js.map