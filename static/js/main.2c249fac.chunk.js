(this["webpackJsonppaths-to-glory"]=this["webpackJsonppaths-to-glory"]||[]).push([[0],{101:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=(n(94),n(14)),l=n(34),s=n(35),u=n(146),m=n(154),f=n(78),h=n(155),d=n(52),p=n(64),g=n(65),b=n(49),v=n.n(b),E="https://10.110.101.254/nodes";var O=function(){function e(){Object(p.a)(this,e)}return Object(g.a)(e,null,[{key:"getPaths",value:function(e){return v.a.get("".concat(E,"/").concat(e,"/paths")).then((function(e){return JSON.parse(e.text)})).catch((function(e){console.log(e)}))}},{key:"transformPaths",value:function(e){if(0===e.previous.nodes.length&&0===e.next.nodes.length)throw new Error("No paths found for this node.");var t=e.node,n=new Set(e.previous.nodes.map((function(e){return e.name}))),a=e.previous.nodes.filter((function(e){return e.name!==t.name})).sort((function(e,t){return t.count-e.count})).map((function(e){return[e.name,t.name,e.count]})),r=e.next.nodes.filter((function(e){return e.name!==t.name})).sort((function(e,t){return t.count-e.count})).map((function(e){return[t.name,n.has(e.name)?(a=e.name,a+" "):e.name,e.count];var a}));return[].concat([["From","To","Count"]],Object(d.a)(a),Object(d.a)(r))}},{key:"getDataForNode",value:function(e){var t=this;return this.getPaths(function(e){return" "===e[e.length-1]?e.slice(0,e.length-1):e}(e)).then((function(e){return t.transformPaths(e)}))}},{key:"getResults",value:function(e){return v.a.get("".concat(E,"/list?limit=1000")).then((function(e){return JSON.parse(e.text).nodeIds})).catch((function(e){console.log(e)}))}}]),e}(),y=(n(101),n(66)),j=n(18);var w=function(e){var t=e.data,n=e.setNodeName,a=Object(j.a)();return r.a.createElement(y.a,{width:"100%",height:"100%",chartType:"Sankey",loader:r.a.createElement(u.a,{color:"primary",size:100}),data:t,options:{sankey:{node:{width:100,interactivity:!0,colors:a.palette.colors,nodePadding:16,label:{fontSize:16,bold:!0}},link:{colors:a.palette.colors,colorMode:"gradient",fillOpacity:.9}}},chartEvents:[{eventName:"select",callback:function(e){var t=e.chartWrapper.getChart().getSelection();if(1===t.length){var a=Object(i.a)(t,1)[0].name;n(a)}}}]})},N=n(42),k=n(151),x=n(152),S=n(153),B=n(150),C=n(73),I=n.n(C),P=n(159),T=n(68),F=n.n(T),M=n(50),R=n(51),W=n.n(R),z=n(69),D=n(156),J=n(157),L=n(4),q=n(9),A=n(72),U=n.n(A),G=Object(L.a)({root:{"& .MuiOutlinedInput-root":{color:"inherit",marginLeft:"1.5rem",backgroundColor:Object(q.c)("#fff",.15),"&:hover":{backgroundColor:Object(q.c)("#fff",.25)},"& fieldset":{border:0}}}})(D.a);var H=function(e){var t=e.setNodeName,n=r.a.useState(!1),a=Object(i.a)(n,2),o=a[0],c=a[1],l=r.a.useState([]),s=Object(i.a)(l,2),m=s[0],f=s[1],h=0===m.length;return r.a.useEffect((function(){var e=!0;if(h)return Object(z.a)(W.a.mark((function t(){var n;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.getResults();case 2:(n=t.sent)&&e&&f(n);case 4:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[h]),r.a.createElement(J.a,{id:"asynchronous-demo",style:{width:300},open:o,onOpen:function(){c(!0)},onClose:function(){c(!1)},options:m,loading:h,disableClearable:!0,blurOnSelect:!0,clearOnBlur:!0,freeSolo:!0,value:"",size:"small",onChange:function(e,n){t(n)},renderInput:function(e){return r.a.createElement(G,Object.assign({},e,{placeholder:"Find a node\u2026",variant:"outlined",InputProps:Object(M.a)(Object(M.a)({},e.InputProps),{},{endAdornment:r.a.createElement(r.a.Fragment,null,h?r.a.createElement(u.a,{color:"inherit",size:20}):r.a.createElement(U.a,null),e.InputProps.endAdornment)})}))}})},V=Object(k.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(N.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),helpImage:{maxWidth:"100%"},paper:{padding:e.spacing(2)},disclaimer:{marginTop:e.spacing(2)}}}));function Y(e){var t=e.setNodeName,n=r.a.useState(!1),a=Object(i.a)(n,2),o=a[0],c=a[1],l=V();return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{position:"fixed"},r.a.createElement(S.a,null,r.a.createElement(m.a,{className:l.title,variant:"h6",noWrap:!0},"OncoEMR User Paths"),r.a.createElement(H,{setNodeName:t}),r.a.createElement("div",{className:l.grow}),r.a.createElement(B.a,{"aria-label":"What is this?","aria-haspopup":"true",onClick:function(){return c(!0)},color:"inherit"},r.a.createElement(I.a,null)))),r.a.createElement(P.a,{open:o,onClose:function(){return c(!1)},"aria-labelledby":"What is this?","aria-describedby":"Learn how to use the app."},r.a.createElement("img",{src:F.a,alt:"Chart",className:l.helpImage}),r.a.createElement("div",{className:l.paper},r.a.createElement(m.a,{variant:"h6",gutterBottom:!0},"How to Use and Interpret"),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"This chart shows the flow of users through OncoEMR. Each node represents a page or a modal within OncoEMR. The lines represent users\u2019 movement from one page/modal to another. The thickness of the lines indicate how frequent that movement occurs; the thicker the line the more frequent the movement."),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"Clicking on a node will show you the flow of users from it."),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"You can use the search function to locate and display nodes of interest."),r.a.createElement("div",{className:l.disclaimer},r.a.createElement(m.a,{variant:"h6",gutterBottom:!0},"Disclaimer"),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"This application is a proof-of-concept. The data shown does not represent all users\u2019 activity in OncoEMR.")))))}var $=n(74),K=n.n($);function Q(){var e=Object(l.a)(["\n  max-width: 40%;\n  margin-bottom: 1rem;\n"]);return Q=function(){return e},e}function X(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return X=function(){return e},e}function Z(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return Z=function(){return e},e}function _(){var e=Object(l.a)(["\n  padding: 1rem;\n  padding-top: calc(4rem + 1rem);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  position: relative;\n"]);return _=function(){return e},e}var ee=Object(f.a)({palette:{primary:{main:"#5051DB"},colors:["#5051DB","#05bfe0","#1463b0","#33d1bf","#0a7387","#33f5f5"]}}),te=s.a.main(_()),ne=s.a.div(Z()),ae=s.a.div(X()),re=s.a.img(Q());var oe=function(){var e=Object(a.useState)("Visit List"),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(null),l=Object(i.a)(c,2),s=l[0],f=l[1],d=Object(a.useState)(null),p=Object(i.a)(d,2),g=p[0],b=p[1],v=Object(a.useState)(!1),E=Object(i.a)(v,2),y=E[0],j=E[1];return Object(a.useEffect)((function(){j(!0),O.getDataForNode(n).then((function(e){f(e),b(null)})).catch((function(e){b(e.message)})).finally((function(){j(!1)}))}),[n]),r.a.createElement(h.a,{theme:ee},r.a.createElement(Y,{setNodeName:o}),r.a.createElement(te,null,s&&!g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{data:s,setNodeName:o})),g&&r.a.createElement(ae,null,r.a.createElement(re,{src:K.a,alt:"error"}),r.a.createElement(m.a,{variant:"h6"},g)),y&&r.a.createElement(ne,null,r.a.createElement(u.a,{color:"primary",size:100}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,t,n){e.exports=n.p+"static/media/help.c506c2ac.png"},74:function(e,t,n){e.exports=n.p+"static/media/error.74a8c9ef.png"},89:function(e,t,n){e.exports=n(109)},94:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.2c249fac.chunk.js.map