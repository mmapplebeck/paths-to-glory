(this["webpackJsonppaths-to-glory"]=this["webpackJsonppaths-to-glory"]||[]).push([[0],{100:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=(n(93),n(13)),l=n(35),s=n(36),u=n(146),m=n(152),d=n(77),f=n(153),h=n(51),p=n(63),g=n(64),v=n(49),b=n.n(v),E="https://10.110.101.254/nodes";function O(e){return" "===e[e.length-1]?e.slice(0,e.length-1):e}var j=function(){function e(){Object(p.a)(this,e)}return Object(g.a)(e,null,[{key:"getPaths",value:function(e){return b.a.get("".concat(E,"/").concat(e,"/paths")).then((function(e){return JSON.parse(e.text)}))}},{key:"transformPaths",value:function(e){if(0===e.previous.nodes.length&&0===e.next.nodes.length)throw new Error("No paths found.");var t=e.node,n=new Set(e.previous.nodes.map((function(e){return e.name}))),a=e.previous.nodes.filter((function(e){return e.name!==t.name})).sort((function(e,t){return t.count-e.count})).map((function(e){return[e.name,t.name,e.count]})),r=e.next.nodes.filter((function(e){return e.name!==t.name})).sort((function(e,t){return t.count-e.count})).map((function(e){return[t.name,n.has(e.name)?(a=e.name,a+" "):e.name,e.count];var a}));return[].concat([["From","To","Count"]],Object(h.a)(a),Object(h.a)(r))}},{key:"getDataForNode",value:function(e){var t=this;return this.getPaths(O(e)).then((function(e){return t.transformPaths(e)}))}},{key:"getResults",value:function(e){return b.a.get("".concat(E,"/list?limit=1000")).then((function(e){return JSON.parse(e.text).nodeIds}))}}]),e}(),y=(n(100),n(26)),w=n(65),N=n.n(w),k=n(66),x=n(143),S=n(19),C=Object(x.a)((function(){return{root:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},isHovering:{cursor:"pointer"}}}));var B=function(e){var t=e.data,n=(e.nodeName,e.setNodeName),o=Object(S.a)(),c=Object(a.useState)(!1),l=Object(i.a)(c,2),s=l[0],m=l[1],d=Object(a.useState)(!1),f=Object(i.a)(d,2),h=f[0],p=f[1],g=C();return r.a.createElement("div",{className:N()(g.root,Object(y.a)({},g.isHovering,s))},r.a.createElement(k.a,{width:"100%",height:"100%",chartType:"Sankey",loader:r.a.createElement(u.a,{color:"primary",size:100}),data:t,options:{sankey:{node:{width:100,interactivity:!0,colors:o.palette.colors,nodePadding:16,label:{fontSize:16,bold:!0}},link:{colors:o.palette.colors,colorMode:"gradient",fillOpacity:.9}}},chartEvents:[{eventName:"select",callback:function(e){var t=e.chartWrapper.getChart().getSelection();if(1===t.length){var a=Object(i.a)(t,1)[0].name;n(a)}}},{eventName:"ready",callback:function(e){var t=e.chartWrapper,n=e.google;if(!h){p(!0);var a=t.getChart();n.visualization.events.addListener(a,"onmouseover",(function(e){var t=e.name,n=e.row;t&&1!==n&&m(!0)})),n.visualization.events.addListener(a,"onmouseout",(function(){m(!1)}))}}}]}))},I=n(150),P=n(151),T=n(149),W=n(72),z=n.n(W),F=n(157),M=n(68),R=n.n(M),D=n(50),L=n(154),J=n(155),H=n(4),q=n(9),A=n(71),U=n.n(A),G=Object(H.a)({root:{"& .MuiOutlinedInput-root":{color:"inherit",marginLeft:"1.5rem",backgroundColor:Object(q.c)("#fff",.15),"&:hover":{backgroundColor:Object(q.c)("#fff",.25)},"& fieldset":{border:0}}}})(L.a);var V=function(e){var t=e.setNodeName,n=r.a.useState(!1),a=Object(i.a)(n,2),o=a[0],c=a[1],l=r.a.useState([]),s=Object(i.a)(l,2),m=s[0],d=s[1],f=0===m.length;return r.a.useEffect((function(){var e=!0;if(f)return j.getResults().then((function(t){e&&d(t)})).catch((function(e){console.log(e)})),function(){e=!1}}),[f]),r.a.createElement(J.a,{id:"asynchronous-demo",style:{width:300},open:o,onOpen:function(){c(!0)},onClose:function(){c(!1)},options:m,loading:f,disableClearable:!0,blurOnSelect:!0,clearOnBlur:!0,freeSolo:!0,value:"",size:"small",onChange:function(e,n){t(n)},renderInput:function(e){return r.a.createElement(G,Object.assign({},e,{placeholder:"Find a node\u2026",variant:"outlined",InputProps:Object(D.a)(Object(D.a)({},e.InputProps),{},{endAdornment:r.a.createElement(r.a.Fragment,null,f?r.a.createElement(u.a,{color:"inherit",size:20}):r.a.createElement(U.a,null),e.InputProps.endAdornment)})}))}})},Y=Object(x.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(y.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),helpImage:{maxWidth:"100%"},paper:{padding:e.spacing(2)},disclaimer:{marginTop:e.spacing(2)}}}));function $(e){var t=e.setNodeName,n=r.a.useState(!1),a=Object(i.a)(n,2),o=a[0],c=a[1],l=Y();return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{position:"fixed"},r.a.createElement(P.a,null,r.a.createElement(m.a,{className:l.title,variant:"h6",noWrap:!0},"OncoEMR User Paths"),r.a.createElement(V,{setNodeName:t}),r.a.createElement("div",{className:l.grow}),r.a.createElement(T.a,{"aria-label":"What is this?","aria-haspopup":"true",onClick:function(){return c(!0)},color:"inherit"},r.a.createElement(z.a,null)))),r.a.createElement(F.a,{open:o,onClose:function(){return c(!1)},"aria-labelledby":"What is this?","aria-describedby":"Learn how to use the app."},r.a.createElement("img",{src:R.a,alt:"Chart",className:l.helpImage}),r.a.createElement("div",{className:l.paper},r.a.createElement(m.a,{variant:"h6",gutterBottom:!0},"How to Use and Interpret"),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"This chart shows the flow of users through OncoEMR. Each node represents a page or a modal within OncoEMR. The lines represent users\u2019 movement from one page/modal to another. The thickness of the lines indicate how frequent that movement occurs; the thicker the line the more frequent the movement."),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"Clicking on a node will show you the flow of users from it."),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"You can use the search function to locate and display nodes of interest."),r.a.createElement("div",{className:l.disclaimer},r.a.createElement(m.a,{variant:"h6",gutterBottom:!0},"Disclaimer"),r.a.createElement(m.a,{variant:"body1",gutterBottom:!0},"This application is a proof-of-concept. The data shown does not represent all users\u2019 activity in OncoEMR.")))))}var K=n(73),Q=n.n(K);function X(){var e=Object(l.a)(["\n  max-width: 40%;\n  margin-bottom: 1rem;\n"]);return X=function(){return e},e}function Z(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: 50%;\n  text-align: center;\n"]);return Z=function(){return e},e}function _(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return _=function(){return e},e}function ee(){var e=Object(l.a)(["\n  padding: 1rem;\n  padding-top: calc(4rem + 1rem);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  position: relative;\n"]);return ee=function(){return e},e}var te=Object(d.a)({palette:{primary:{main:"#5051DB"},colors:["#5051DB","#05bfe0","#1463b0","#33d1bf","#0a7387","#33f5f5"]}}),ne=s.a.main(ee()),ae=s.a.div(_()),re=s.a.div(Z()),oe=s.a.img(X());var ce=function(){var e=Object(a.useState)("Visit List"),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(null),l=Object(i.a)(c,2),s=l[0],d=l[1],h=Object(a.useState)(null),p=Object(i.a)(h,2),g=p[0],v=p[1],b=Object(a.useState)(!1),E=Object(i.a)(b,2),y=E[0],w=E[1];Object(a.useEffect)((function(){w(!0),j.getDataForNode(n).then((function(e){d(e),v(null)})).catch((function(e){console.log(g),v(e.message)})).finally((function(){w(!1)}))}),[n]);var N=function(e){o(O(e))};return(r.a.createElement(f.a,{theme:te},r.a.createElement($,{setNodeName:N}),r.a.createElement(ne,null,s&&!g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{data:s,nodeName:n,setNodeName:N})),g&&r.a.createElement(re,null,r.a.createElement(oe,{src:Q.a,alt:"error"}),r.a.createElement(m.a,{variant:"h6"},g)),y&&r.a.createElement(ae,null,r.a.createElement(u.a,{color:"primary",size:100})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,t,n){e.exports=n.p+"static/media/help.c506c2ac.png"},73:function(e,t,n){e.exports=n.p+"static/media/error.74a8c9ef.png"},88:function(e,t,n){e.exports=n(107)},93:function(e,t,n){}},[[88,1,2]]]);
//# sourceMappingURL=main.de9b936b.chunk.js.map